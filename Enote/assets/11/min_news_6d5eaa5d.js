F._setMod("newsplus");F._fileMap({"/js/min_news_41c12e30.js":["config","common/conf","log/news_all","news/news_constructor","news/img_action","news/tab_change","news/change_for_change","news/words_contructor","hotsug/init_sug","tools/strpx","tools/throttle","hotsug/hot_newlabel","start/news_start"],"/js/hot_sug_e100e15c.js":["hotsug/hot_sug"],"/css/hot_sug_67ee3b23.css":["hot_sug.css"],"/css/news_min_3913c9e2.css":["news_init.css","skin.css"]});F._firstScreenJS=F._firstScreenJS||[];F._firstScreenJS.push("/js/min_news_41c12e30.js");F.module("newsplus:common/conf",function(c,b,a){var d=16;b.everyPageItemNum=d});F.addLog("newsplus:news",{newsShow:"0200100000",newsClick:"0200100001",newsHover:"0200100002"});F.addLog("newsplus:hotsug",{newsClick:"0200100001",hotsugClick:"0200200001"});F.module("newsplus:news/news_constructor",function(d,e,k){var h=$("#s_content_"+2);var f=d("newsplus:common/conf");var j=d("newsplus:hotsug/hot_newlabel"),c=d("newsplus:tools/strpx");var g={wordswrap:["#{topicContent}"].join(""),words:['<li class="words-li #{viewed}" data-num="#{list}">','<div class="words-item">','<a href="#{showlinkurl}" target="_blank" class="hot-item-link #{showisnew}" hidefocus>','<em class="dot"></em>','<em class="words-item-content" data-title="#{dataTitle}" data-new="#{newItem}">#{showkey}</em>','<em class="is-new"></em>',"</a>","</div>","</li>"].join(""),topic:['<li class="topic-li topic-page-#{num} #{viewed}" data-num="#{list}">','<div class="topic-item">','<a href="#{showlinkurl}" target="_blank" class="hot-item-link" hidefocus>','<em class="order topic-icon-#{order}"></em>','<em class="topic-item-content" data-title="#{dataTitle}">#{showtitle}</em>',"</a>","</div>","</li>"].join(""),suggest:['<div class="s-hithot-suggest">','<div class="suggest-shadow"></div>','<div class="suggest-main">','<div class="suggest-main-content">',"#{suggestContent}","</div>","</div>","</div>"].join(""),wordsSuggest:['<div class="suggest-content">',"#{wordsContentStr}","<div>"].join(""),wordsSuggestItem:['<p class="words-item">','<span class="dot"></span>','<a class="words-title"></a>','<span class="words-src"></span>','<span class="words-time"></span>',"</p>"].join(""),wordsSuggestSummary:['<p class="words-summary"></p>'].join(""),topicSuggest:['<div class="suggest-content">','<img class="suggest-topic-img" src="#{topicImg}" title="#{topicImgTitle}"/>','<p class="suggest-topic-title">','<a target="_blank" hidefocus></a>',"<span></span>","</p>",'<p class="suggest-topic-summary">#{topicSummary}</p>',"</div>"].join("")};e.getNewsTpl=function(l){return g[l]};e.dealWordsData=function(n,l){var m=[];$.each(n,function(o,p){if(o>f.everyPageItemNum-1){return}var q={};if(p){q.isNewkey=(p.isnew=="true")?true:false;q.showisnew=q.isNewkey?"show-new":"";q.showlinkurl=(p.linkurl);q.list=o%f.everyPageItemNum;q.dataTitle=$.encodeHTML(p.key);q.newItem=p.isnew=="true"?1:0;q.viewed=p.isviewed==1?"viewed":"";q.showkey=p.key;m.push($.formatString(l,q))}});return m};e.dealTopicData=function(n,p){var t=[];var q=0;for(var o=0,r=f.everyPageItemNum/2;o<r;o++){for(var l=o;l<=o+f.everyPageItemNum/2;l+=f.everyPageItemNum/2){var s=n[l];if(!s){break}s.showlinkurl=(s.linkurl);s.list=q++;s.dataTitle=$.encodeHTML(s.title);s.num=parseInt(l/f.everyPageItemNum);var m=parseInt(l/2);s.order=l+1;s.viewed=j.isInLocal("topic",s.title)>=0?"viewed":"";s.showtitle=c.cutStrByLen(s.title,20);t.push($.formatString(p,s))}}return t};var i=function(o,l,n){var m=[];$.each(o,function(p,q){var r={};if(q){r.hasImg=((p!==0&&q.type=="img")?g.headlineImg:"");r.realtitle=$.decodeHTML(q.title);r.url=decodeURIComponent(q.url);r.type=q.type;r.hasIcon=((p!==0&&q.type=="img")?"has-img-icon":"");if(p===0){r.title=c.cutStrByLen(q.title,26);m.push($.formatString(l,r))}else{r.title=c.cutStrByLen(q.title,40);m.push($.formatString(n,r))}}});return m};var a=function(n){var m=[],o=[],l=[];$.each(n,function(r,p){var q={};q.num=r;q.title=c.cutStrByLen(p.title,40);q.imgSmallUrl=decodeURIComponent(p.imgSmallUrl);q.imgUrl=decodeURIComponent(p.imgUrl);q.url=decodeURIComponent(p.url);q.resname=p.resname;q.curimg=(r==0?"cur-img":"");q.curspan=(r==0?"cur-span click-span":"");m.push({title:q.title,url:q.url,resname:q.resname});l.push($.formatString(g.bigImg,q));o.push($.formatString(g.smallImg,q))});return{titleArray:m,bigImgHtml:l,smallImgHtml:o}};var b=function(r){var w=[],s=[],q=[],v=[],t=[],n=[],p=j.getLocalData("topic"),o=[],m=null,l=r.hotWords.length-1,u=null;k.use("news/words_contructor",function(x){x.saveWordsData(r.hotWords)});v=e.dealWordsData(r.hotWords,g.words)};e.render=b});F.module("newsplus:news/img_action",function(c,g,l){var i=c("newsplus:tools/throttle"),e=[],f={showSmallImgCount:5,sumImgCount:5},b=true;var k=function(m){$("#s_content_2 .img-viewer-cell").css("left",-m*425);if(e[m].title){$("#s_content_2 .img-title").attr("url",e[m].url).html(e[m].title)}};var j=function(o,p){var n=o,m=null;if(p){$("#s_content_2 .img-viewer-cell").css("left",-n*425);if(e[n].title){$("#s_content_2 .img-title").attr("href",e[n].url).attr("data-res",e[n].resname).html(e[n].title)}$("#s_content_2 .img-viewer").attr("num",n);$("#s_content_2 .news-smallimg-mask").parent().removeClass("click-span");$('#s_content_2 .img-bars span[num="'+n+'"]').addClass("click-span")}$("#s_content_2 .news-smallimg-mask").parent().removeClass("cur-span");$('#s_content_2 .img-bars span[num="'+n+'"]').addClass("cur-span");if(h("pre")){$("#s_content_2 .pre-img").children(".arrow").addClass("nouse-arrow")}else{if(h("next")){$("#s_content_2 .next-img").children(".arrow").addClass("nouse-arrow")}else{$("#s_content_2 .pre-img").children(".arrow").removeClass("nouse-arrow");$("#s_content_2 .next-img").children(".arrow").removeClass("nouse-arrow")}}};var a=function(n,o){(o&&o.length>0)&&(f.sumImgCount=o.length);var p=false,m=false;e=n;$("#s_content_2 .s-news-img-ctner").on("mouseout",function(){var q=setTimeout(function(){if(m){clearTimeout(q);return}var r=$("#s_content_2 .img-viewer").attr("num");j(r,false)},300)});$("#s_content_2 .s-news-img-ctner").delegate(".news-smallimg-mask","mouseover",function(){var r=$(this).parent(),q=-1;if(!p){p=setTimeout(function(){if(!r.hasClass("cur-span")){q=r.attr("num");if(q<0){return}m=true;j(q,false)}},200)}}).delegate(".news-smallimg-mask","mouseout",function(){if(p){clearTimeout(p);p=false;m=false}}).delegate(".news-smallimg-mask","mousedown",function(r){r.preventDefault();if(!b){return}var s=$(this).parent(),q=s.attr("num");if(q!=$("#s_content_2 .img-viewer").attr("num")){j(q,true);d({toIndex:s.index(),isBtn:false,isSlideOver:b})}l.fire("newsClick",{clickType:"smallImg"})}).delegate(".change-bigimg","mouseover",function(){var r=$(this),q=$("#s_content_2 .img-viewer").attr("num");if(r.hasClass("pre-img")){if(h("pre")){r.children(".arrow").addClass("nouse-arrow")}else{r.children(".arrow").addClass("is-hover")}}else{if(r.hasClass("next-img")){if(h("next")){r.children(".arrow").addClass("nouse-arrow")}else{r.children(".arrow").addClass("is-hover")}}}}).delegate(".change-bigimg","mouseout",function(){var q=$(this);if(q.hasClass("pre-img")){q.children(".arrow").removeClass("is-hover")}else{if(q.hasClass("next-img")){q.children(".arrow").removeClass("is-hover")}}}).delegate(".change-bigimg","click",function(){if(!b){return}var s=$(this),r=$("#s_content_2 .img-viewer").attr("num"),q=r;if(s.hasClass("pre-img")){if(--r<0){return}if(r==0){s.children(".arrow").removeClass("is-hover");s.children(".arrow").addClass("nouse-arrow")}$("#s_content_2 .next-img").children(".arrow").removeClass("nouse-arrow");j(r,true);d({curIndex:$("#s_content_2 .img-bars span[num='"+q+"']").index(),isBtn:true,btn:"pre",isSlideOver:b});l.fire("newsClick",{clickType:"preBigImgArrow"})}else{if(s.hasClass("next-img")){if(++r>f.sumImgCount-1){return}if(r==f.sumImgCount-1){s.children(".arrow").removeClass("is-hover");s.children(".arrow").addClass("nouse-arrow")}$("#s_content_2 .pre-img").children(".arrow").removeClass("nouse-arrow");j(r,true);d({curIndex:$("#s_content_2 .img-bars span[num='"+q+"']").index(),isBtn:true,btn:"next",isSlideOver:b});l.fire("newsClick",{clickType:"nextBigImgArrow"})}}}).delegate(".img-title","click",function(){var s=this;var r=+$("#s_content_2 .img-viewer").attr("num")+1;var q=$(s).text();var t=$(s).attr("href");l.fire("newsClick",{clickType:"bigImgTitle",resname:$(this).attr("data-res"),indexnum:r,title:q,url:t})}).delegate(".big-img-link","click",function(){var s=this;var r=+$("#s_content_2 .img-viewer").attr("num")+1;var q=$(s).parents(".s-news-img-ctner").children(".img-title").text();var t=$(s).attr("href");l.fire("newsClick",{clickType:"bigImg",resname:$(this).attr("data-res"),indexnum:r,title:q,url:t})}).mouseenter(function(){$(this).addClass("s-news-img-hasarrow");if(h("pre")){$("#s_content_2 .pre-img").children(".arrow").addClass("nouse-arrow")}else{if(h("next")){$("#s_content_2 .next-img").children(".arrow").addClass("nouse-arrow")}}}).mouseleave(function(){$(this).removeClass("s-news-img-hasarrow")});if($.isIE6){$("#s_content_2 .s-news-img-ctner").delegate(".news-smallimg-img","mouseover",function(){var r=$(this).parent(),q=-1;if(!p){p=setTimeout(function(){if(!r.hasClass("cur-span")){q=r.attr("num");if(q<0){return}j(q,false)}},300)}}).delegate(".news-smallimg-img","mouseout",function(){if(p){clearTimeout(p);p=false}}).delegate(".news-smallimg-img","mousedown",function(){if(!b){return}var r=$(this).parent(),q=r.attr("num");if(q!=$("#s_content_2 .img-viewer").attr("num")){j(q,true);d({toIndex:r.index(),isBtn:false,isSlideOver:b})}})}$("#s_content_2 .news-headlines").delegate(".headline-link","click",function(){var q=$(this).hasClass("topline-link")?"Y":"N",r=$(this).hasClass("has-img-icon");l.fire("newsClick",{clickType:"headLineNews",newsHasIcon:r,newsIsTopLine:q})})};var h=function(n){var m=$("#s_content_2 .img-viewer").attr("num");if(n){return n=="pre"?(m==0):(m==f.sumImgCount-1)}return(m==0)||(m==f.sumImgCount-1)};var d=function(s){b=false;var o=$("#s_content_2 .img-bars-content").position().left;var q="",n=82,r=0,m=parseInt(Math.abs(o)/n);if(!s.isBtn){if(m>0&&s.toIndex-m==0){q="pre"}if(s.toIndex!=f.sumImgCount-1&&s.toIndex-m==f.showSmallImgCount-1){q="next"}}else{if(s.btn=="pre"&&m>0&&(s.curIndex-m==0||s.curIndex-m==1)){q="pre"}if(s.btn=="next"&&f.sumImgCount-f.showSmallImgCount-m>0&&(s.curIndex-m==f.showSmallImgCount-1||s.curIndex-m==f.showSmallImgCount-2)){q="next"}}if(q==""){b=true;return}var p=q=="pre"?(o+82):(o-82);$("#s_content_2 .img-bars-content").animate({left:p},function(){b=true})};g.imgAction=a});F.module("newsplus:news/tab_change",function(c,b,a){var f=c("newsplus:tools/throttle");function e(i){var h=i.type,g=(i.type=="words"?"topic":"words");if(i.dom.parent().parent().hasClass("hot-"+h)){return}i.dom.parent().parent().removeClass("hot-"+g).addClass("hot-"+h);a.fire("newsShow",{showType:h});a.fire("newsClick",{clickType:h})}var d=function(){$("#s_content_2 .hot-title").delegate(".title-words","mouseover",function(){f.throttle(e,null,{type:"words",dom:$(this)},300)}).delegate(".title-words","mouseout",function(){f.clearThrottle(e)}).delegate(".title-topic","mouseout",function(){f.clearThrottle(e)}).delegate(".title-topic","mouseover",function(){f.throttle(e,null,{type:"topic",dom:$(this)},310)})};b.changeTab=d});F.module("newsplus:news/change_for_change",function(f,c,a){var g=f("newsplus:tools/throttle");var b=function(i){var j=i,h=j.attr("num")<0?0:j.attr("num");h++;j.attr("num",h);a.use("news/words_contructor",function(k){k.createWords(h)})};var e=function(i){var j=i,h=j.attr("num")<0?0:j.attr("num");h++;j.attr("num",h);if(h%2){j.parent().parent().removeClass("first-topic").addClass("second-topic")}else{j.parent().parent().removeClass("second-topic").addClass("first-topic")}};var d=function(){var h=0;$("#s_content_2 .hot-title").delegate(".title-change-words","click",function(){var i=$(this);b(i);a.fire("newsClick",{clickType:"wordsChange"})})};c.change=d});F.module("newsplus:news/words_contructor",function(a,c,i){var g=a("newsplus:hotsug/init_sug"),e=a("newsplus:common/conf");var b=null;var h=function(l){var m=$("#s_content_2 .words-content");if(!b||b.length<=0||!m.get(0)){return}var k=l*e.everyPageItemNum,j=k-b.length*parseInt(k/b.length);_showData=null;if(b.length>e.everyPageItemNum){_showData=b.slice(j,j+e.everyPageItemNum);if(_showData.length<e.everyPageItemNum){_showData=_showData.concat(b.slice(0,e.everyPageItemNum-_showData.length))}}else{_showData=b}i.use("news/news_constructor",function(p){var n=p.getNewsTpl("words"),o=p.dealWordsData(_showData,n);m.html(o);g.bindEvent("words")})};var d=function(j){b=j};var f=function(j){$.each(b,function(k,l){if(l.key==j){l.isviewed="1"}})};c.saveWordsData=d;c.createWords=h;c.viewedWords=f});F.module("newsplus:hotsug/init_sug",function(b,e,i){var f=b("newsplus:common/conf");var d=null,c="",h;var g=function(l){var j="."+l+"-li",k="."+l+"-item-content",m=$("#s_content_2 .hot-content-cell");if(!m){return}m.find(j).delegate(".hot-item-link","click",function(){var n=$(this).parent().parent(),o=$(this).find(k);i.use("hotsug/hot_newlabel",function(p){p.setLocalData(l,o.attr("data-title"));n.addClass("viewed");n.removeClass("is-new-words")});i.fire("newsClick",{clickType:"wordTopic",newsType:l})}).delegate(".hot-item-link","mouseout",function(){if(d){h=setTimeout(function(){clearTimeout(h);clearTimeout(d);$("#s_news_hotsug").remove();c="";d=null},350)}}).delegate(".hot-item-link","mouseover",function(){var q=$(this),o=q.parent().parent(),n=o.attr("data-num"),p=q.find(k);if(n>=0&&n<=f.everyPageItemNum-1&&p.attr("data-title")!=""){if(c===p.attr("data-title")&&$("#s_news_hotsug").get(0)){return}clearTimeout(h);c=p.attr("data-title");clearTimeout(d);$("#s_news_hotsug").remove();d=null;d=setTimeout(function(){i.use("hotsug/hot_sug",function(r){r.createSug(l,p.attr("data-title"),n,o,function(){$("#s_news_hotsug").mouseenter(function(){clearTimeout(h)})});if(l==="words"){if(p.attr("data-new")==1){o.removeClass("is-new-words")}}});i.use("hotsug/hot_newlabel",function(r){r.setLocalData(l,p.attr("data-title"));q.addClass("viewed");i.fire("hotsugClick",{clickType:"layerShow",newsType:l});q.removeClass("is-new-words")})},500)}});m.find("."+l+"-content").delegate(".hot-link","click",function(){i.fire("hotsugClick",{clickType:"wordTopic",newsType:l})})};var a=function(){g("words");g("topic");$("#s_content_2 .hot-content-cell").mouseleave(function(){if(d){clearTimeout(d);$("#s_news_hotsug").remove();c="";d=null}if($("#s_news_hotsug").get(0)){$("#s_news_hotsug").remove()}})};e.bindEvent=g;e.initSug=a});F.module("newsplus:tools/strpx",function(b,d,i){var c=null,g=$.browser.ie<9?true:false;var e=function(){if(c&&c[0]){return c}else{if($("#s_news_strpx_span")[0]){c=$("#s_news_strpx_span");return c}else{c=$('<span id="s_news_strpx_span"></span>').css({visibility:"hidden",position:"absolute",bottom:0,left:0,fontSize:"12px",fontFamily:'"Microsoft Yahei", "微软雅黑", "宋体", \5b8b\4f53, Tahoma, Arial, Helvetica, STHeiti'}).appendTo($("body"));return c}}};var h=function(j){if(j>128){return true}else{if(!g&&(j==77||j==87||j==109||j==119)){return true}return false}};var a=function(j){return e().html(j).text()};var f=function(n,j){var o=$.decodeHTML(a(n));if(o.length*2<=j){return o}var m=0,l="";for(var k=0;k<o.length;k++){l+=o.charAt(k);if(h(o.charCodeAt(k))){m+=2;if(m>=j){return $.encodeHTML(l.substring(0,l.length-1))+"..."}}else{m+=1;if(m>=j){return $.encodeHTML(l.substring(0,l.length-1))+"..."}}}return $.encodeHTML(l)};d.cutStrByLen=f});F.module("newsplus:tools/throttle",function(c,b,a){b.throttle=function(g,e,d,f){if(g.throttleId){clearTimeout(g.throttleId)}g.throttleId=setTimeout(function(){g.call((e?e:null),d)},(f?f:300))};b.clearThrottle=function(d){if(d.throttleId){clearTimeout(d.throttleId)}}});F.module("newsplus:hotsug/hot_newlabel",function(c,f,p){var e="hotsug_"+s_session.portrait,l={words:60,topic:12},g="@+&+@",o=b("words"),k=b("topic");var i="/home/xman/submit/newsviewed";var d=0;var n=function(q){clearTimeout(d);d=setTimeout(function(){$.ajaxpost(i,{title:q},function(r){})},200)};f.isInLocal=function(r,q){if(r==="words"){return h(o,j(q))}else{if(r==="topic"){return h(k,j(q))}}};function m(r){if(!r){return}if(!r[0]){return j(r)}for(var q=r.length-1;q>=0;q--){r[q]=j(r[q])}return r}f.setOldData=function(q,r){if(q==="words"){o=m(r)}else{if(q==="topic"){k=m(r)}else{return}}f.setLocalData(q)};function b(r){var q=$.localstorage.get(e+"_"+r);if(q.status==0&&q.value&&q.value!=""){return a(q.value.split(g))}else{return false}}f.getLocalData=b;f.setLocalData=function(r,s){if(r=="words"){n(s);p.use("news/words_contructor",function(t){t.viewedWords(s)});return}var q=null;q=f.getLocalData(r);if(!q){q=[]}if(s&&s!==""){if(h(q,s)<0){q.push(j(s))}}if(q.length>=l[r]){q=q.splice(q.length-l[r]-1,l[r])}$.localstorage.set(e+"_"+r,q.join(g));if(r==="words"&&s&&s!==""&&!o[s]){if(!o[0]){o=[]}o.push(j(s))}else{if(r==="topic"&&s&&s!==""&&!k[s]){if(!k[0]){k=[]}k.push(j(s))}}};function a(q){if(q&&q.length>0){for(var r=q.length-1;r>=0;r--){if(q[r]==""){q.splice(r,1)}}}return q}var h=function(s,r){var t=j(r);if(s&&t){for(var q=s.length-1;q>=0;q--){if(s[q]==t){return q}}}return -1};var j=function(q){return String(q).replace(/\s+/g,"")};f.isInArray=h});F.module("newsplus:start/news_start",function(c,b,a){b.init=function(){a.use("news/news_constructor",function(e){var f=(new Function("return ("+$("#s_newscard_asyn_data").html()+")"))();e.render(f);d(f.titleArray,f)})};var d=function(f,g){var e=f;a.use("news/img_action",function(h){h.imgAction(e,g.imgNews)});a.use("news/tab_change",function(h){h.changeTab()});a.use("news/change_for_change",function(h){h.change()});a.use("hotsug/init_sug",function(h){h.initSug()})}});F.call("newsplus:start/news_start","init");