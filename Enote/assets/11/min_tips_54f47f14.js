F._setMod("tipsplus");F._fileMap({"/js/min_tips_838431eb.js":["config","log/log","start/tips_start"],"/js/tips_mods_9ac980a1.js":["mods/new_card","mods/top_menu","mods/tutorial","mods/weather","mods/cardsub"],"/css/min_tips_afef601f.css":["tips.css"]});F._firstScreenCSS=F._firstScreenCSS||[];F._firstScreenCSS.push("/css/min_tips_afef601f.css");F._firstScreenJS=F._firstScreenJS||[];F._firstScreenJS.push("/js/min_tips_838431eb.js");F.addLog("tipsplus:start",{show:"1200000000",click:"1200000001"});F.module("tipsplus:start/tips_start",function(d,c,b){function e(){}e.prototype={constructor:e,init:function(){this.initView()},initView:function(){var f=this;$.ajaxget(s_domain.baseuri+"/xman/data/tipspluslist",function(g){if(g.errNo==0){f.loadTipsCss();data=g.data;f.render(data.visible,data.hidden);f.addEvent()}else{}})},loadTipsCss:function(){$.loadCss(s_domain.staticUrl+"static/tipsplus/css/min_tips_afef601f.css")},render:function(g,f){$("#head").addClass("s-tips");this.redDot(g.redDot,f.redDot);this.newWord(g.newWord,f.newWord);this.orderLayer(g.orderLayer);this.disorderLayer(g.disorderLayer)},addEvent:function(){var f=this;this.switchTab(function(i){var h=$('#s_ctner_menus [data-id="'+i.to+'"]'),j=h.data("data-tid"),g=h.data("data-v");if(j){$(".marked",h).remove();f.update(j,g)}});$("#u_sp, #s_user_name_menu").on("click","[data-tid]",function(){var h=$(this),i=h.data("data-tid"),g=h.data("data-v");if(i){$(".marked",h).remove();f.update(i,g)}});$(".s-tips").on("mousedown","[data-log]",function(){var k,g,i,h,j;k=$(this).attr("data-log")||"";g=k.split(",");i=g[0]||"";h=g[1]||"";j=g[2]||"";b.fire("click",{clickType:i,url:"",title:"",cardId:h})});b.listen(["tipsplus:mods/cardsub"],"clickLog",function(g){b.fire("click",{clickType:g.tid,url:"",title:"",cardId:g.url})});b.listen(["tipsplus:mods/top_menu","tipsplus:mods/new_card","tipsplus:mods/cardsub"],"showLog",function(g){b.fire("show",{showType:g.tid,url:"",title:"",cardId:g.cardId})})},redDot:function(h,f){var g=this;$.each(h,function(k,n){var o=n.id,m=n.locId,j=n.dir,l;l=$('[data-tid="'+m+'"]');l.addClass("red-dot");l.append('<span class="marked '+j+'"><i>&#8226</i></span>');l.data("data-tid",o);l.data("data-v",0)});$.each(f,function(j,m){var n=m.id,l=m.locId,k;k=$('[data-tid="'+l+'"]');k.data("data-tid",n);k.data("data-v",0)})},newWord:function(h,f){var g=this;$.each(h,function(k,n){var o=n.id,m=n.locId,j=n.dir,l;l=$('[data-tid="'+m+'"]');l.addClass("new-word");l.append('<span class="marked '+j+'"></span>');l.data("data-tid",o);l.data("data-v",0)});$.each(f,function(j,m){var n=m.id,l=m.locId,k;k=$('[data-tid="'+l+'"]');k.data("data-tid",n);k.data("data-v",0)})},orderLayer:function(j,g){var i=this,f,h=[];$.each(j,function(k,l){(function(r){var s=r.id,q=r.locId,o=r.type,p,n="",m=$.Deferred();if(!q){p=$("#head");n="s-isindex-wrap"}else{p=$('[data-tid="'+q+'"]')}if(p.length){b.use("mods/"+o,function(t){var u=new t();u.init({tid:q,elem:p,text:r.text,link:r.link,pic:r.pic,btnText:r.btnText,iSHook:n,extend:r.extend});u.done(function(v){i.update(s,1)});m.resolveWith(null,[u])})}else{m.reject()}h.push(m.promise())})(l)});$.each(j,function(k,n){var o=n.id,m=n.tid,l;l=$('[data-tid="'+m+'"]');l.data("data-tid",o);l.on("click",function(){var p=$(this);i.update(p.data("data-tid"),0)})});this.pushQueue(h)},pushQueue:function(g){var h=this,f;f=g[0];if(f){f.done(function(i){h.queue.push(i);g.splice(0,1);h.pushQueue(g)})}else{this.show()}},disorderLayer:function(g){var f=this;$.each(g,function(h,j){(function(n){var o=n.id,m=n.locId,k=n.type,i="",l;if(!m){l=$("#head");i="s-isindex-wrap"}else{l=$('[data-tid="'+m+'"]')}if(l.length){b.use("mods/"+k,function(p){var q=new p();q.init({tid:m,elem:l,text:n.text,link:n.link,pic:n.pic,btnText:n.btnText,iSHook:i,extend:n.extend});q.done(function(){f.update(o,1)});if($.isFunction(q.show)){q.show()}})}})(j)})},show:function(){var g=this,f;f=this.queue[0];if(f){f.show();f.done(function(){g.dequeue();g.show()})}},switchTab:function(f){b.listen("superplus:skeleton/skeleton_ext","viewChange",function(g){f(g)})},update:function(g,f){$.ajaxpost(s_domain.baseuri+"/xman/submit/tipsplusupdate",{id:g,type:f},function(h){})},queue:[],dequeue:function(){this.queue.splice(0,1)}};var a=new e();c.init=function(){a.init()}});F.call("tipsplus:start/tips_start","init");